<!DOCTYPE html>
<head>
    <title>Bug Detective</title>
    <link rel="stylesheet" type="text/css" href="static/explanation.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="static/logging.js"></script>
</head>
<body>
    <div class="content-container">
        <h1>Bug Detective</h1>
        <div><i>It is a capital mistake to theorize before you have all the evidence</i> - Sherlock Holmes</div>

        <div>Bug Detective guides you through three steps to help you find and <b>understand</b> a bug: </div>
        <ol>
            <li id="step1">How is the output wrong?
                <div>Sometimes, just understanding the output makes everything else easy.</div>
                <div><a id="next_1" href="/sequence?completed=1"><button>Next</button></a></div>
            </li>
            <li id="step2">What should we look into?
            <div>Sometimes, asking the right question is the key.</div>
                <div><a id="next_2" href="/sequence?completed=4"><button>Next</button></a></div>
            </li>
            <li id="step3">Let's investigate!
            <div>Sometimes, you  need to dig a little deeper to really understand where things went wrong.</div>
                <div><a id="next_2" href="/sequence?completed=7"><button>Next</button></a></div>
            </li>
        </ol>
        <div>Let's work through some practice problems that focus on each of these steps, one at a time.</div>

        <a id="global_next" href="/sequence?completed=0"><button>Next</button></a>
    </div>
    <div class="image-container">
        <img style="height: 300px;width: 300px;object-fit: cover;object-position: left top;" src="static/sherlock.png">
    </div>


    <script>
        const urlParams = new URLSearchParams(window.location.search);

        const highlight_step = urlParams.get('which_step')
        if(highlight_step) {
            document.querySelector(`#${highlight_step}`).classList.add('highlighted')
            document.querySelector(`#global_next`).classList.add('hidden')
        }

        // Pass along identifier parameter if it exists
        const identifier = urlParams.get('identifier');
        if (identifier) {
            document.querySelectorAll('a[href^="/sequence?"]').forEach(link => {
                const currentHref = link.getAttribute('href');
                link.setAttribute('href', `${currentHref}&identifier=${encodeURIComponent(identifier)}`);
            });
        }
    </script>
</body>